<!DOCTYPE HTML><html lang="en"><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><head><meta charset="utf-8"><meta name="keywords" content="Calculate Capital Asset Pricing Model (CAPM) with Python, Wenvenn"><meta name="description" content="Capital Asset Pricing Model (CAPM)CAPM is one of the most commonly used formula in finance, which describes the relation"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="referrer" content="no-referrer-when-downgrade"><script async src="https://www.googletagmanager.com/gtag/js?id=G-VYP094MR3V"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VYP094MR3V")</script><title>Calculate Capital Asset Pricing Model (CAPM) with Python | Wenvenn</title><link rel="icon" type="image/png" href="/favicon-32x32.png"><link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css"><link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><script src="/libs/jquery/jquery-3.6.0.min.js"></script><meta name="generator" content="Hexo 5.4.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="Wenvenn" type="application/atom+xml"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="/android-chrome-192x192.png" class="logo-img" alt="LOGO"> <span class="logo-span">Wenvenn</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>Home</span></a></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fas fa-chart-bar" style="zoom:.6"></i> <span>Shortcuts</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/tags"><i class="fas fa-tags" style="margin-top:-20px;zoom:.6"></i> <span>Tags</span></a></li><li><a href="/categories"><i class="fas fa-bookmark" style="margin-top:-20px;zoom:.6"></i> <span>Categories</span></a></li><li><a href="/archives"><i class="fas fa-archive" style="margin-top:-20px;zoom:.6"></i> <span>Archives</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fas fa-address-card" style="zoom:.6"></i> <span>About</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/about"><i class="fas fa-user-circle" style="margin-top:-20px;zoom:.6"></i> <span>About</span></a></li><li><a href="/friends"><i class="fas fa-link" style="margin-top:-20px;zoom:.6"></i> <span>Usefull Links</span></a></li></ul></li><li class="hide-on-med-and-down nav-item"><a href="/projects" class="waves-effect waves-light"><i class="fas fa-cogs" style="zoom:.6"></i> <span>Projects</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="Search" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/android-chrome-192x192.png" class="logo-img circle responsive-img"><div class="logo-name">Wenvenn</div><div class="logo-desc"></div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> Home</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-chart-bar"></i> Shortcuts <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/tags" style="margin-left:75px"><i class="fa fas fa-tags" style="position:absolute;left:50px"></i> <span>Tags</span></a></li><li><a href="/categories" style="margin-left:75px"><i class="fa fas fa-bookmark" style="position:absolute;left:50px"></i> <span>Categories</span></a></li><li><a href="/archives" style="margin-left:75px"><i class="fa fas fa-archive" style="position:absolute;left:50px"></i> <span>Archives</span></a></li></ul></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-address-card"></i> About <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/about" style="margin-left:75px"><i class="fa fas fa-user-circle" style="position:absolute;left:50px"></i> <span>About</span></a></li><li><a href="/friends" style="margin-left:75px"><i class="fa fas fa-link" style="position:absolute;left:50px"></i> <span>Usefull Links</span></a></li></ul></li><li class="m-nav-item"><a href="/projects" class="waves-effect waves-light"><i class="fa-fw fas fa-cogs"></i> Projects</a></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/17.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">Calculate Capital Asset Pricing Model (CAPM) with Python</h1></div></div></div></div></div><main class="container content"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/yfinance/"><span class="chip bg-color">yfinance</span> </a><a href="/tags/plotly/"><span class="chip bg-color">plotly</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Quantitative-Investment/" class="post-category">Quantitative Investment</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp; 2024-03-01</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp; 2024-03-01</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp; 1.9k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp; 12 Min</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><link rel="stylesheet" href="/libs/prism/prism.css"><div class="card-content article-card-content"><div id="articleContent"><h2 id="Capital-Asset-Pricing-Model-CAPM"><a href="#Capital-Asset-Pricing-Model-CAPM" class="headerlink" title="Capital Asset Pricing Model (CAPM)"></a>Capital Asset Pricing Model (CAPM)</h2><p>CAPM is one of the most commonly used formula in finance, which describes the relationship betwwen systematic risk and expected return for assets, particularly stocks. The model is based on the relationship between an asset’s beta, the risk-free rate (typically the Treasury bill rate) and the equity risk premium.</p><p>The CAPM formula is as below:</p><p>$$r_i = r_f + \beta_i(r_m - r_f)$$</p><p>Where:</p><ul><li>$r_i$ is the expected return of a security</li><li>$r_f$ is the risk free rate</li><li>$\beta_i$ is the beta of the security relative to the market</li><li>$r_m$ is the market return which includes all securities in the market. A good representation of the U.S. market portfolio is the S&amp;P 500.</li></ul><p>The goal of the CAPM formula is to gauge whether the current price of a stock is consistent with its likely return.</p><p>The beta is a measure of how much risk the investment will add to a portfolio that looks like the market, or a measure of a portfolio’s volatility in relation to the overall market. If beta is less than 1, it indicates the portforlio is less volatile than the market, which means it reduces the risk of a portfolio. On the other hand, if a portforlio is riskier than the market, it will have a betwa greater than 1.</p><h2 id="Load-the-list-of-S-amp-P-500-companies-from-Wikepedia"><a href="#Load-the-list-of-S-amp-P-500-companies-from-Wikepedia" class="headerlink" title="Load the list of S&amp;P 500 companies from Wikepedia"></a>Load the list of S&amp;P 500 companies from Wikepedia</h2><p>S&amp;P 500 is a stock market index tracking the stock performance of 500 of the largest companies listed on stock exchanges in the United States.</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Get the list of S&amp;P 500 stocks from Wikepedia</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token keyword">def</span> <span class="token function">load_data</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    html <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_html<span class="token punctuation">(</span>url<span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> html

<span class="token comment"># Load the list of S&amp;P 500 companies</span>
url <span class="token operator">=</span> <span class="token string">'https://en.wikipedia.org/wiki/List_of_S%26P_500_companies'</span>
df <span class="token operator">=</span> load_data<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>Symbol</th><th>Security</th><th>GICS Sector</th><th>GICS Sub-Industry</th><th>Headquarters Location</th><th>Date added</th><th>CIK</th><th>Founded</th></tr></thead><tbody><tr><th>0</th><td>MMM</td><td>3M</td><td>Industrials</td><td>Industrial Conglomerates</td><td>Saint Paul, Minnesota</td><td>1957-03-04</td><td>66740</td><td>1902</td></tr><tr><th>1</th><td>AOS</td><td>A. O. Smith</td><td>Industrials</td><td>Building Products</td><td>Milwaukee, Wisconsin</td><td>2017-07-26</td><td>91142</td><td>1916</td></tr><tr><th>2</th><td>ABT</td><td>Abbott</td><td>Health Care</td><td>Health Care Equipment</td><td>North Chicago, Illinois</td><td>1957-03-04</td><td>1800</td><td>1888</td></tr><tr><th>3</th><td>ABBV</td><td>AbbVie</td><td>Health Care</td><td>Biotechnology</td><td>North Chicago, Illinois</td><td>2012-12-31</td><td>1551152</td><td>2013 (1888)</td></tr><tr><th>4</th><td>ACN</td><td>Accenture</td><td>Information Technology</td><td>IT Consulting &amp; Other Services</td><td>Dublin, Ireland</td><td>2011-07-06</td><td>1467373</td><td>1989</td></tr></tbody></table></div><h2 id="Retrieve-the-latest-stock-price-using-yfinance"><a href="#Retrieve-the-latest-stock-price-using-yfinance" class="headerlink" title="Retrieve the latest stock price using yfinance"></a>Retrieve the latest stock price using yfinance</h2><p>We retrieve the latest year’s stock price using yfinance.</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> warnings
warnings<span class="token punctuation">.</span>filterwarnings<span class="token punctuation">(</span><span class="token string">'ignore'</span><span class="token punctuation">)</span>
<span class="token keyword">import</span> yfinance <span class="token keyword">as</span> yf

data <span class="token operator">=</span> yf<span class="token punctuation">.</span>download<span class="token punctuation">(</span>
            <span class="token comment"># tickers list</span>
            tickers <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Symbol'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'^GSPC'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment"># valid periods: 1d, 5d, 1mo, 3mo, 6mo, 1y, 5y, 10y, ytd, max</span>
            period <span class="token operator">=</span> <span class="token string">'1y'</span><span class="token punctuation">,</span>
            <span class="token comment"># valid intervals: 1m, 2m, 5m, 15m, 15m, 30m, 60m, 90m, 1h, 1d, 5d, 1wk, 1mo, 3mo</span>
            interval <span class="token operator">=</span> <span class="token string">'1d'</span><span class="token punctuation">,</span>
            <span class="token comment"># group by ticker</span>
            group_by <span class="token operator">=</span> <span class="token string">'ticker'</span><span class="token punctuation">,</span>
            <span class="token comment"># adjust all OHLC automatically</span>
            auto_adjust <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token comment"># download pre/post regular market hours data</span>
            prepost <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token comment"># use threads for mass downloading</span>
            threads <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token comment"># proxy URL scheme when downloading</span>
            proxy <span class="token operator">=</span> <span class="token boolean">None</span>
            <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>[*********************100%%**********************]  504 of 504 completed

2 Failed downloads:
['BF.B']: Exception('%ticker%: No price data found, symbol may be delisted (period=1y)')
['BRK.B']: Exception('%ticker%: No data found, symbol may be delisted')
</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">data<span class="token punctuation">[</span><span class="token string">'^GSPC'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th>Price</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2023-02-27</th><td>3992.360107</td><td>4018.050049</td><td>3973.550049</td><td>3982.239990</td><td>3836950000</td></tr><tr><th>2023-02-28</th><td>3977.189941</td><td>3997.500000</td><td>3968.979980</td><td>3970.149902</td><td>5043400000</td></tr><tr><th>2023-03-01</th><td>3963.340088</td><td>3971.729980</td><td>3939.050049</td><td>3951.389893</td><td>4249480000</td></tr><tr><th>2023-03-02</th><td>3938.679932</td><td>3990.840088</td><td>3928.159912</td><td>3981.350098</td><td>4244900000</td></tr><tr><th>2023-03-03</th><td>3998.020020</td><td>4048.290039</td><td>3995.169922</td><td>4045.639893</td><td>4084730000</td></tr></tbody></table></div><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Get the available tickers</span>
tickers_unavailable <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'BF.B'</span><span class="token punctuation">,</span> <span class="token string">'BRK.B'</span><span class="token punctuation">]</span>
tickers <span class="token operator">=</span> <span class="token punctuation">[</span>ticker <span class="token keyword">for</span> ticker <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Symbol'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'^GSPC'</span><span class="token punctuation">]</span> <span class="token keyword">if</span> ticker <span class="token keyword">not</span> <span class="token keyword">in</span> tickers_unavailable<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Number of available tickers: '</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>tickers<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Number of available tickers:  502
</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Use Close as the price for each stock and create a new dataframe to store this data.</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
stock <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Date'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'MMM'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>tickers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ticker <span class="token operator">=</span> tickers<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    stock <span class="token operator">=</span> stock<span class="token punctuation">.</span>join<span class="token punctuation">(</span>
             pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>
                 data<span class="token punctuation">[</span>ticker<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Close'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to_list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                 name<span class="token operator">=</span>ticker<span class="token punctuation">,</span>
                 index<span class="token operator">=</span>stock<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>

stock <span class="token operator">=</span> stock<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span><span class="token string">'Date'</span><span class="token punctuation">)</span>
stock<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>MMM</th><th>AOS</th><th>ABT</th><th>ABBV</th><th>ACN</th><th>ADBE</th><th>AMD</th><th>AES</th><th>AFL</th><th>A</th><th>...</th><th>GWW</th><th>WYNN</th><th>XEL</th><th>XYL</th><th>YUM</th><th>ZBRA</th><th>ZBH</th><th>ZION</th><th>ZTS</th><th>^GSPC</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2023-02-27</th><td>101.759285</td><td>64.206650</td><td>97.783730</td><td>148.282318</td><td>262.200623</td><td>322.320007</td><td>78.769997</td><td>23.996420</td><td>66.643791</td><td>141.154373</td><td>...</td><td>668.472412</td><td>104.074387</td><td>63.236515</td><td>101.250412</td><td>124.182861</td><td>296.230011</td><td>122.350578</td><td>47.859604</td><td>163.987595</td><td>3982.239990</td></tr><tr><th>2023-02-28</th><td>101.261154</td><td>64.511368</td><td>99.694916</td><td>147.917068</td><td>261.511230</td><td>323.950012</td><td>78.580002</td><td>23.803526</td><td>66.565651</td><td>140.945908</td><td>...</td><td>661.946350</td><td>107.271660</td><td>62.433975</td><td>101.349144</td><td>124.761726</td><td>300.250000</td><td>122.916191</td><td>48.078060</td><td>165.503891</td><td>3970.149902</td></tr><tr><th>2023-03-01</th><td>103.582634</td><td>65.631935</td><td>98.822639</td><td>149.233841</td><td>259.581085</td><td>323.380005</td><td>78.290001</td><td>23.755301</td><td>66.536346</td><td>136.518066</td><td>...</td><td>664.501221</td><td>111.082634</td><td>61.176975</td><td>99.808891</td><td>123.819832</td><td>302.339996</td><td>121.139977</td><td>47.907097</td><td>166.068771</td><td>3951.389893</td></tr><tr><th>2023-03-02</th><td>103.291267</td><td>66.487114</td><td>100.586800</td><td>148.378433</td><td>261.225677</td><td>333.500000</td><td>80.440002</td><td>23.764944</td><td>65.989365</td><td>140.648071</td><td>...</td><td>677.860413</td><td>112.260574</td><td>62.211575</td><td>100.954201</td><td>126.253059</td><td>306.059998</td><td>122.042961</td><td>45.884064</td><td>167.069748</td><td>3981.350098</td></tr><tr><th>2023-03-03</th><td>104.569481</td><td>66.968750</td><td>102.370560</td><td>149.993103</td><td>265.105774</td><td>344.040009</td><td>81.519997</td><td>24.208611</td><td>66.848907</td><td>142.891754</td><td>...</td><td>690.823425</td><td>114.656044</td><td>62.946434</td><td>102.603035</td><td>127.224380</td><td>309.450012</td><td>125.248100</td><td>46.757858</td><td>169.031982</td><td>4045.639893</td></tr></tbody></table><p>5 rows × 502 columns</p></div><h2 id="Normalize-and-visualize-the-stock-data"><a href="#Normalize-and-visualize-the-stock-data" class="headerlink" title="Normalize and visualize the stock data"></a>Normalize and visualize the stock data</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Normalize stock data based on initial price</span>
<span class="token keyword">def</span> <span class="token function">normalize</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token punctuation">:</span>
    x <span class="token operator">=</span> df<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> x<span class="token punctuation">.</span>columns<span class="token punctuation">:</span>
        x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> x

stock_normalized <span class="token operator">=</span> normalize<span class="token punctuation">(</span>stock<span class="token punctuation">)</span>
stock_normalized<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>MMM</th><th>AOS</th><th>ABT</th><th>ABBV</th><th>ACN</th><th>ADBE</th><th>AMD</th><th>AES</th><th>AFL</th><th>A</th><th>...</th><th>GWW</th><th>WYNN</th><th>XEL</th><th>XYL</th><th>YUM</th><th>ZBRA</th><th>ZBH</th><th>ZION</th><th>ZTS</th><th>^GSPC</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2023-02-27</th><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>...</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td><td>1.000000</td></tr><tr><th>2023-02-28</th><td>0.995105</td><td>1.004746</td><td>1.019545</td><td>0.997537</td><td>0.997371</td><td>1.005057</td><td>0.997588</td><td>0.991962</td><td>0.998827</td><td>0.998523</td><td>...</td><td>0.990237</td><td>1.030721</td><td>0.987309</td><td>1.000975</td><td>1.004661</td><td>1.013570</td><td>1.004623</td><td>1.004565</td><td>1.009246</td><td>0.996964</td></tr><tr><th>2023-03-01</th><td>1.017918</td><td>1.022198</td><td>1.010625</td><td>1.006417</td><td>0.990009</td><td>1.003289</td><td>0.993906</td><td>0.989952</td><td>0.998388</td><td>0.967154</td><td>...</td><td>0.994059</td><td>1.067339</td><td>0.967431</td><td>0.985763</td><td>0.997077</td><td>1.020626</td><td>0.990105</td><td>1.000992</td><td>1.012691</td><td>0.992253</td></tr><tr><th>2023-03-02</th><td>1.015055</td><td>1.035518</td><td>1.028666</td><td>1.000648</td><td>0.996282</td><td>1.034686</td><td>1.021201</td><td>0.990354</td><td>0.990180</td><td>0.996413</td><td>...</td><td>1.014044</td><td>1.078657</td><td>0.983792</td><td>0.997074</td><td>1.016671</td><td>1.033184</td><td>0.997486</td><td>0.958722</td><td>1.018795</td><td>0.999777</td></tr><tr><th>2023-03-03</th><td>1.027616</td><td>1.043019</td><td>1.046908</td><td>1.011537</td><td>1.011080</td><td>1.067386</td><td>1.034912</td><td>1.008843</td><td>1.003078</td><td>1.012308</td><td>...</td><td>1.033436</td><td>1.101674</td><td>0.995413</td><td>1.013359</td><td>1.024492</td><td>1.044627</td><td>1.023682</td><td>0.976980</td><td>1.030761</td><td>1.015921</td></tr></tbody></table><p>5 rows × 502 columns</p></div><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Plot the normalized price of several selected stocks</span>
<span class="token keyword">import</span> plotly<span class="token punctuation">.</span>express <span class="token keyword">as</span> px
fig <span class="token operator">=</span> px<span class="token punctuation">.</span>line<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">'Normalized Prices'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> ticker <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'AMD'</span><span class="token punctuation">,</span><span class="token string">'AAPL'</span><span class="token punctuation">,</span><span class="token string">'GOOG'</span><span class="token punctuation">,</span> <span class="token string">'TSLA'</span><span class="token punctuation">,</span><span class="token string">'IBM'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    fig<span class="token punctuation">.</span>add_scatter<span class="token punctuation">(</span>x<span class="token operator">=</span>stock_normalized<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>stock_normalized<span class="token punctuation">[</span>ticker<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span>ticker<span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://media.publit.io/file/Calculate-Capital-Asset-Pricing-Model-CAPM-with-Pythonnormalized-price.png" alt="Normalized Price"></p><h2 id="Calculate-the-daily-return"><a href="#Calculate-the-daily-return" class="headerlink" title="Calculate the daily return"></a>Calculate the daily return</h2><p>The daily return for each stock is calculated as follows:</p><ul><li>Loop to each row of the stock normalized price</li><li>Calculate the percentage change from the previous day</li><li>The first row is set to 0 as there is no previous value</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">daily_return</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token punctuation">:</span>
    df_daily_return <span class="token operator">=</span> df<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            df_daily_return<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">-</span> df<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">/</span>df<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
        df_daily_return<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> df_daily_return

stock_daily_return <span class="token operator">=</span> daily_return<span class="token punctuation">(</span>stock_normalized<span class="token punctuation">)</span>
stock_daily_return<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}</style><p></p><table border="1" class="dataframe"><thead><tr style="text-align:right"><th></th><th>MMM</th><th>AOS</th><th>ABT</th><th>ABBV</th><th>ACN</th><th>ADBE</th><th>AMD</th><th>AES</th><th>AFL</th><th>A</th><th>...</th><th>GWW</th><th>WYNN</th><th>XEL</th><th>XYL</th><th>YUM</th><th>ZBRA</th><th>ZBH</th><th>ZION</th><th>ZTS</th><th>^GSPC</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2023-02-27</th><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>...</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td><td>0.000000</td></tr><tr><th>2023-02-28</th><td>-0.489519</td><td>0.474589</td><td>1.954503</td><td>-0.246320</td><td>-0.262925</td><td>0.505710</td><td>-0.241202</td><td>-0.803845</td><td>-0.117251</td><td>-0.147686</td><td>...</td><td>-0.976265</td><td>3.072104</td><td>-1.269108</td><td>0.097513</td><td>0.466139</td><td>1.357050</td><td>0.462289</td><td>0.456452</td><td>0.924641</td><td>-0.303600</td></tr><tr><th>2023-03-01</th><td>2.292567</td><td>1.737008</td><td>-0.874946</td><td>0.890210</td><td>-0.738074</td><td>-0.175955</td><td>-0.369052</td><td>-0.202598</td><td>-0.044023</td><td>-3.141518</td><td>...</td><td>0.385963</td><td>3.552638</td><td>-2.013327</td><td>-1.519749</td><td>-0.754955</td><td>0.696085</td><td>-1.445062</td><td>-0.355595</td><td>0.341309</td><td>-0.472526</td></tr><tr><th>2023-03-02</th><td>-0.281289</td><td>1.302992</td><td>1.785178</td><td>-0.573200</td><td>0.633556</td><td>3.129444</td><td>2.746202</td><td>0.040595</td><td>-0.822080</td><td>3.025244</td><td>...</td><td>2.010409</td><td>1.060418</td><td>1.691158</td><td>1.147502</td><td>1.965136</td><td>1.230403</td><td>0.745406</td><td>-4.222826</td><td>0.602748</td><td>0.758219</td></tr><tr><th>2023-03-03</th><td>1.237485</td><td>0.724405</td><td>1.773354</td><td>1.088211</td><td>1.485343</td><td>3.160422</td><td>1.342608</td><td>1.866895</td><td>1.302548</td><td>1.595246</td><td>...</td><td>1.912342</td><td>2.133848</td><td>1.181226</td><td>1.633250</td><td>0.769345</td><td>1.107631</td><td>2.626238</td><td>1.904353</td><td>1.174500</td><td>1.614774</td></tr></tbody></table><p>5 rows × 502 columns</p></div><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Plot the daily return for the selected stocks</span>
fig <span class="token operator">=</span> px<span class="token punctuation">.</span>line<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">'Daily Return'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> ticker <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'AMD'</span><span class="token punctuation">,</span><span class="token string">'AAPL'</span><span class="token punctuation">,</span><span class="token string">'GOOG'</span><span class="token punctuation">,</span> <span class="token string">'TSLA'</span><span class="token punctuation">,</span><span class="token string">'IBM'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    fig<span class="token punctuation">.</span>add_scatter<span class="token punctuation">(</span>x<span class="token operator">=</span>stock_daily_return<span class="token punctuation">.</span>index<span class="token punctuation">,</span> y<span class="token operator">=</span>stock_daily_return<span class="token punctuation">[</span>ticker<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span>ticker<span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://media.publit.io/file/Calculate-Capital-Asset-Pricing-Model-CAPM-with-Python-daily-return.png" alt="Daily Return"></p><h2 id="Calculate-Beta-for-AAPL"><a href="#Calculate-Beta-for-AAPL" class="headerlink" title="Calculate Beta for AAPL"></a>Calculate Beta for AAPL</h2><p>Beta is the slope of the line regression line, or the market return vs. stock return, which could be calculated using np.polyfit</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># S&amp;P 500 has ticker symbol ^GSPC</span>

beta<span class="token punctuation">,</span> alpha <span class="token operator">=</span> np<span class="token punctuation">.</span>polyfit<span class="token punctuation">(</span>stock_daily_return<span class="token punctuation">[</span><span class="token string">'^GSPC'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> stock_daily_return<span class="token punctuation">[</span><span class="token string">'AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
beta<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre><code>1.0716621967198638
</code></pre><h2 id="Calculate-CAPM-for-AAPL"><a href="#Calculate-CAPM-for-AAPL" class="headerlink" title="Calculate CAPM for AAPL"></a>Calculate CAPM for AAPL</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Daily return for the market</span>
stock_daily_return<span class="token punctuation">[</span><span class="token string">'^GSPC'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre><code>0.09994347738081993
</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Annual return for the market would be the daily return multiply the number of trading days in a year</span>
r_m <span class="token operator">=</span> stock_daily_return<span class="token punctuation">[</span><span class="token string">'^GSPC'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">252</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Return of the market: '</span><span class="token punctuation">,</span> r_m<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre><code>Return of the market:  25.185756299966624
</code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Expected return could be calculated using CAPM formula</span>
<span class="token comment"># Assume the risk free rate rate is 0</span>
r_f <span class="token operator">=</span> <span class="token number">0</span>
r_e_AAPL <span class="token operator">=</span> r_f <span class="token operator">+</span> beta <span class="token operator">*</span> <span class="token punctuation">(</span>r_m <span class="token operator">-</span> r_f<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Expected return: '</span><span class="token punctuation">,</span> r_e_AAPL<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Expected return:  26.99062292247338
</code></pre><p>Apparently this is not realistic.</p><ul><li>The markets are very competitive and efficient, investors who work in the markets are rational and risk-averse. Everything can change very fast.</li></ul><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h3><p><a target="_blank" rel="noopener" href="https://www.investopedia.com/terms/c/capm.asp">https://www.investopedia.com/terms/c/capm.asp</a></p><p><a target="_blank" rel="noopener" href="https://www.mlq.ai/capital-asset-pricing-model-python/">https://www.mlq.ai/capital-asset-pricing-model-python/</a></p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">Author: </i></span><span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">wenvenn</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">Link: </i></span><span class="reprint-info"><a href="https://www.wenvenn.com/20240301/calculate-capital-asset-pricing-model-capm-with-python/">https://www.wenvenn.com/20240301/calculate-capital-asset-pricing-model-capm-with-python/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">Reprint policy: </i></span><span class="reprint-info">All articles in this blog are used except for special statements <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> reprint policy. If reproduced, please indicate source <a href="/about" target="_blank">wenvenn</a> !</span></div></div><script async defer>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",function(t){M.toast({html:'<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>'})})</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/yfinance/"><span class="chip bg-color">yfinance</span> </a><a href="/tags/plotly/"><span class="chip bg-color">plotly</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;Previous</div><div class="card"><a href="/20240306/risk-adjusted-performance-metrics-calculation-in-python/"><div class="card-image"><img src="/medias/featureimages/15.jpg" class="responsive-img" alt="Risk-adjusted performance metrics calculation in Python"> <span class="card-title">Risk-adjusted performance metrics calculation in Python</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2024-03-06 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Quantitative-Investment/" class="post-category">Quantitative Investment</a></span></div></div><div class="card-action article-tags"><a href="/tags/numpy/"><span class="chip bg-color">numpy</span> </a><a href="/tags/pandas/"><span class="chip bg-color">pandas</span> </a><a href="/tags/yfinance/"><span class="chip bg-color">yfinance</span> </a><a href="/tags/matplotlib/"><span class="chip bg-color">matplotlib</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">Next&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/20240228/building-a-quantitative-value-investing-strategy/"><div class="card-image"><img src="/medias/featureimages/11.jpg" class="responsive-img" alt="Building a quantitative value investing strategy"> <span class="card-title">Building a quantitative value investing strategy</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2024-02-28 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/Quantitative-Investment/" class="post-category">Quantitative Investment</a></span></div></div><div class="card-action article-tags"><a href="/tags/yfinance/"><span class="chip bg-color">yfinance</span> </a><a href="/tags/xlsxwriter/"><span class="chip bg-color">xlsxwriter</span></a></div></div></div></div></article></div><script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2021-2024</span> <a href="/about" target="_blank">Wenvenn</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;Total Words:&nbsp;<span class="white-color">36.2k</span> <span id="busuanzi_container_site_pv">&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;Total visits:&nbsp; <span id="busuanzi_value_site_pv" class="white-color"></span> </span><span id="busuanzi_container_site_uv">&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;Total visitors:&nbsp; <span id="busuanzi_value_site_uv" class="white-color"></span></span><br><span id="sitetime">Loading ...</span><script>var calcSiteTime=function(){var e=new Date,t="2021",n=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),r=e.getHours(),o=e.getMinutes(),s=e.getSeconds(),e=Date.UTC(t,"12","6","22","0","0"),i=Date.UTC(n,a,i,r,o,s)-e,r=Math.floor(i/31536e6),o=Math.floor(i/864e5-365*r),s=Math.floor(i/36e5-365*r*24-24*o),e=Math.floor(i/6e4-365*r*24*60-24*o*60-60*s);Math.floor(i/1e3-365*r*24*60*60-24*o*60*60-60*s*60-60*e);t===String(n)?(document.getElementById("year").innerHTML=n,e="This site has been running for "+o+" days",document.getElementById("sitetime").innerHTML=e):(document.getElementById("year").innerHTML=t+" - "+n,o="This site has been running for "+r+" years and "+o+" days",document.getElementById("sitetime").innerHTML=o)};calcSiteTime()</script><br><div class="github-badge"><a style="color:#fff" rel="license" href="https://github.com/" target="_blank" title="静态网页托管于 GitHub Pages"><span class="badge-subject">Hosted</span> <span class="badge-value bg-brightgreen">GitHub</span></a></div><div class="github-badge"><a style="color:#fff" rel="license" href="https://www.cloudflare.com/" target="_blank" title="Cloudflare提供域名相关服务"><span class="badge-subject">DNS</span> <span class="badge-value bg-blueviolet">Cloudflare</span></a></div><div class="github-badge"><a style="color:#fff" rel="license" href="https://publit.io/" target="_blank" title="Publitio提供图片存储"><span class="badge-subject">Image</span> <span class="badge-value bg-red">Publitio</span></a></div><div class="github-badge"><a style="color:#fff" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可"><span class="badge-subject"><i class="fa fa-copyright"></i></span> <span class="badge-value bg-lightgrey">CC BY 4.0</span></a></div><style>.github-badge{display:inline-block;border-radius:4px;text-shadow:none;font-size:13px;color:#fff;line-height:15px;background-color:#abbac3;margin-bottom:5px}.github-badge .badge-subject{display:inline-block;background-color:#4d4d4d;padding:4px 4px 4px 6px;border-top-left-radius:4px;border-bottom-left-radius:4px}.github-badge .badge-value{display:inline-block;padding:4px 6px 4px 4px;border-top-right-radius:4px;border-bottom-right-radius:4px}.github-badge .bg-brightgreen{background-color:#4dc820!important}.github-badge .bg-orange{background-color:orange!important}.github-badge .bg-yellow{background-color:#d8b024!important}.github-badge .bg-blueviolet{background-color:#8833d7!important}.github-badge .bg-pink{background-color:#f26bae!important}.github-badge .bg-red{background-color:#e05d44!important}.github-badge .bg-blue{background-color:#007ec6!important}.github-badge .bg-lightgrey{background-color:#9f9f9f!important}.github-badge .bg-gray,.github-badge .bg-grey{background-color:#555!important}.github-badge .bg-lightgray,.github-badge .bg-lightgrey{background-color:#9f9f9f!important}</style></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/qiangwennorge" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:qiang.wen.norge@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span> <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword" class="search-input"></div><div id="searchResult"></div></div></div><script type="text/javascript">$(function(){!function(t,r,s){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),t=document.getElementById(r),n=document.getElementById(s);t.addEventListener("input",function(){var o='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var n,e,r,s=!0,i=t.title.trim().toLowerCase(),l=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=0===(a=t.url).indexOf("/")?t.url:"/"+a,c=-1,u=-1;""!==i&&""!==l&&h.forEach(function(t,e){n=i.indexOf(t),c=l.indexOf(t),n<0&&c<0?s=!1:(c<0&&(c=0),0===e&&(u=c))}),s&&(o+="<li><a href='"+a+"' class='search-result-title'>"+i+"</a>",e=t.content.trim().replace(/<[^>]+>/g,""),0<=u&&(a=u+80,(a=0===(t=(t=u-20)<0?0:t)?100:a)>e.length&&(a=e.length),r=e.substr(t,a),h.forEach(function(t){var e=new RegExp(t,"gi");r=r.replace(e,'<em class="search-keyword">'+t+"</em>")}),o+='<p class="search-result">'+r+"...</p>"),o+="</li>")}),o+="</ul>",n.innerHTML=o)})}})}("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/libs/materialize/materialize.min.js"></script><script src="/libs/masonry/masonry.pkgd.min.js"></script><script src="/libs/aos/aos.js"></script><script src="/libs/scrollprogress/scrollProgress.min.js"></script><script src="/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/js/matery.js"></script><script type="text/javascript">var windowWidth=$(window).width();768<windowWidth&&document.write('<script type="text/javascript" src="/libs/others/snow.js"><\/script>')</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?96c14430edaa02f468fca771961be30b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="/libs/others/clicklove.js" async></script><script async src="/libs/others/busuanzi.pure.mini.js"></script><script type="text/javascript" color="0,0,255" pointcolor="104,33,122" opacity="0.7" zindex="-1" count="99" src="/libs/background/canvas-nest.js"></script><script type="text/javascript" size="150" alpha="0.6" zindex="-1" src="/libs/background/ribbon.min.js" async></script><script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async></script><script src="/libs/instantpage/instantpage.js" type="module"></script><script type="text/javascript">var st,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="Wenvenn",clearTimeout(st)):(document.title="Welcome Back!",st=setTimeout(function(){document.title=OriginTitile},3e3))})</script></body></html>